<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tablero 8x8</title>
  <style>
    :root {
      --square-size: 100px;
      --board-size: calc(var(--square-size) * 8);
      --board-color: #1f8a3b;
      --square-border: #0f4d20;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(180deg, #0f4d20 0%, #0d3618 100%);
      font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
      color: #f4f4f4;
    }

    .wrapper {
      text-align: center;
      max-width: 1180px;
      padding: 24px 18px 40px;
    }

    h1 {
      margin-bottom: 16px;
      letter-spacing: 0.04em;
    }

    .controls {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .button {
      background: #f4f4f4;
      color: #0d3618;
      border: none;
      border-radius: 8px;
      padding: 10px 16px;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.25);
      transition: transform 120ms ease, box-shadow 120ms ease, background 120ms ease;
    }

    .button:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
      background: #ffffff;
    }

    .button:active {
      transform: translateY(0);
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.28);
    }

    .button--primary {
      background: #f17c00;
      color: #fff8f0;
    }

    .button--primary:hover {
      background: #ff9400;
    }

    .layout {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 18px;
      align-items: start;
    }

    .board {
      width: var(--board-size);
      height: var(--board-size);
      display: grid;
      grid-template-columns: repeat(8, var(--square-size));
      grid-template-rows: repeat(8, var(--square-size));
      background-color: var(--board-color);
      border: 8px solid #0b2a13;
      border-radius: 12px;
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.35);
      overflow: hidden;
      justify-self: center;
    }

    .square {
      position: relative;
      width: var(--square-size);
      height: var(--square-size);
      border: 1px solid var(--square-border);
      background-color: var(--board-color);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .piece {
      position: absolute;
      width: 70%;
      height: 70%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      border-radius: 50%;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.35);
      border: 3px solid rgba(255, 255, 255, 0.3);
      display: grid;
      place-items: center;
      color: #0d0d0d;
      font-weight: 700;
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.02em;
      text-shadow: 0 1px 2px rgba(255, 255, 255, 0.55), 0 0 6px rgba(0, 0, 0, 0.35);
    }

    .piece--white {
      background: radial-gradient(circle at 30% 30%, #ffffff, #dcdcdc 60%, #b3b3b3);
    }

    .piece--black {
      background: radial-gradient(circle at 30% 30%, #555, #1f1f1f 60%, #0a0a0a);
      border-color: rgba(255, 255, 255, 0.2);
    }

    .piece--red {
      background: radial-gradient(circle at 30% 30%, #ffdddd, #c62828 65%, #8b0000);
      border-color: rgba(255, 255, 255, 0.25);
    }

    .piece--violet {
      background: radial-gradient(circle at 30% 30%, #f5e9ff, #8e44ad 60%, #4a148c);
      border-color: rgba(255, 255, 255, 0.3);
    }

    .piece--active {
      outline: 4px solid #fbd34d;
      outline-offset: 1px;
      box-shadow: 0 0 0 5px rgba(251, 211, 77, 0.4);
      animation: blink 1s ease-in-out infinite alternate;
    }

    @keyframes blink {
      from {
        filter: brightness(1);
      }
      to {
        filter: brightness(1.25);
      }
    }

    .square--range {
      box-shadow: inset 0 0 0 4px rgba(255, 132, 0, 0.5);
      background: radial-gradient(circle at 50% 50%, rgba(255, 132, 0, 0.25), transparent 65%);
    }

    .square--move {
      box-shadow: inset 0 0 0 4px rgba(0, 0, 0, 0.55);
      background: radial-gradient(circle at 50% 50%, rgba(0, 0, 0, 0.3), transparent 70%);
    }

    .tooltip {
      position: absolute;
      background: #0f4d20;
      color: #f4f4f4;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      padding: 10px 12px;
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.35);
      pointer-events: none;
      white-space: nowrap;
      font-size: 0.9rem;
      z-index: 10;
      transform: translate(-50%, -110%);
    }

    .tooltip h3 {
      margin: 0 0 6px;
      font-size: 1rem;
    }

    .tooltip ul {
      list-style: none;
      margin: 0;
      padding: 0;
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 4px 8px;
    }

    .roster {
      display: grid;
      gap: 12px;
      grid-template-columns: 1fr;
      align-self: stretch;
    }

    .card {
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 10px;
      padding: 12px 14px;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.25);
    }

    .card h2 {
      margin: 0 0 8px;
      font-size: 1.05rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .swatch {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      display: inline-block;
      border: 2px solid rgba(255, 255, 255, 0.35);
    }

    .stats {
      list-style: none;
      padding: 0;
      margin: 0;
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 6px 10px;
      font-size: 0.95rem;
    }

    @media (max-width: 1024px) {
      .layout {
        grid-template-columns: 1fr;
        justify-items: center;
      }

      .roster {
        width: min(100%, 420px);
      }
    }
  </style>
</head>
<body>
  <main class="wrapper">
    <h1>Tablero 8x8 con 64 cuadros verdes</h1>
    <div class="controls" aria-label="Controles de turno">
      <button class="button" id="passTurn" type="button">Pasar</button>
      <button class="button button--primary" id="attack" type="button">Atacar</button>
    </div>
    <section class="layout" aria-label="Tablero con información de fichas a los lados">
      <section class="roster" aria-label="Características de las fichas de color">
        <article class="card">
          <h2><span class="swatch piece--white"></span> Avispa</h2>
          <ul class="stats">
            <li>Movimiento: 8</li>
            <li>Ataque: 8</li>
            <li>Defensa: 18</li>
            <li>Daño c/c: 2</li>
            <li>Daño a/d: 2</li>
            <li>Resistencia c/c: 0</li>
            <li>Resistencia a/d: 0</li>
            <li>Distancia máxima: 3</li>
            <li>Vida: 5</li>
            <li>Agilidad: 20</li>
          </ul>
        </article>
        <article class="card">
          <h2><span class="swatch piece--red"></span> Hulk</h2>
          <ul class="stats">
            <li>Movimiento: 9</li>
            <li>Ataque: 11</li>
            <li>Defensa: 17</li>
            <li>Daño c/c: 5</li>
            <li>Daño a/d: 5</li>
            <li>Resistencia c/c: 2</li>
            <li>Resistencia a/d: 2</li>
            <li>Distancia máxima: 0</li>
            <li>Vida: 10</li>
            <li>Agilidad: 10</li>
          </ul>
        </article>
        <article class="card">
          <h2><span class="swatch piece--violet"></span> Capitán América</h2>
          <ul class="stats">
            <li>Movimiento: 8</li>
            <li>Ataque: 10</li>
            <li>Defensa: 17</li>
            <li>Daño c/c: 2</li>
            <li>Daño a/d: 2</li>
            <li>Resistencia c/c: 0</li>
            <li>Resistencia a/d: 2</li>
            <li>Distancia máxima: 3</li>
            <li>Vida: 8</li>
            <li>Agilidad: 40</li>
          </ul>
        </article>
      </section>

      <section class="board" aria-label="Tablero de 64 cuadros verdes">
        <!-- Fila 1 -->
        <div class="square"><span class="piece piece--white" role="img" aria-label="Ficha blanca">Avispa</span></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"><span class="piece piece--black" role="img" aria-label="Ficha negra">Spider-man</span></div>

        <!-- Fila 2 -->
        <div class="square"><span class="piece piece--red" role="img" aria-label="Ficha roja">Hulk</span></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"><span class="piece piece--black" role="img" aria-label="Ficha negra">Lobezno</span></div>

        <!-- Fila 3 -->
        <div class="square"><span class="piece piece--violet" role="img" aria-label="Ficha violeta">Capitán América</span></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"><span class="piece piece--black" role="img" aria-label="Ficha negra">Cíclope</span></div>

        <!-- Fila 4 -->
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>

        <!-- Fila 5 -->
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>

        <!-- Fila 6 -->
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>

        <!-- Fila 7 -->
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>

        <!-- Fila 8 -->
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
      </section>

      <section class="roster" aria-label="Características de las fichas negras">
        <article class="card">
          <h2><span class="swatch piece--black"></span> Spider-man</h2>
          <ul class="stats">
            <li>Movimiento: 10</li>
            <li>Ataque: 12</li>
            <li>Defensa: 18</li>
            <li>Daño c/c: 2</li>
            <li>Daño a/d: 2</li>
            <li>Resistencia c/c: 0</li>
            <li>Resistencia a/d: 0</li>
            <li>Distancia máxima: 2</li>
            <li>Vida: 9</li>
            <li>Agilidad: 50</li>
          </ul>
        </article>
        <article class="card">
          <h2><span class="swatch piece--black"></span> Lobezno</h2>
          <ul class="stats">
            <li>Movimiento: 8</li>
            <li>Ataque: 10</li>
            <li>Defensa: 16</li>
            <li>Daño c/c: 2</li>
            <li>Daño a/d: 2</li>
            <li>Resistencia c/c: 1</li>
            <li>Resistencia a/d: 1</li>
            <li>Distancia máxima: 0</li>
            <li>Vida: 8</li>
            <li>Agilidad: 30</li>
          </ul>
        </article>
        <article class="card">
          <h2><span class="swatch piece--black"></span> Cíclope</h2>
          <ul class="stats">
            <li>Movimiento: 6</li>
            <li>Ataque: 11</li>
            <li>Defensa: 15</li>
            <li>Daño c/c: 2</li>
            <li>Daño a/d: 4</li>
            <li>Resistencia c/c: 0</li>
            <li>Resistencia a/d: 0</li>
            <li>Distancia máxima: 10</li>
            <li>Vida: 5</li>
            <li>Agilidad: 20</li>
          </ul>
        </article>
      </section>
    </section>
  </main>
  <div id="tooltip" class="tooltip" hidden></div>

  <script>
    const board = document.querySelector('.board');
    const squares = Array.from(board.querySelectorAll('.square'));
    const tooltip = document.getElementById('tooltip');
    const passButton = document.getElementById('passTurn');
    const attackButton = document.getElementById('attack');

    const pieceStats = {
      avispa: {
        name: 'Avispa',
        movimiento: 8,
        ataque: 8,
        defensa: 18,
        danoCC: 2,
        danoAD: 2,
        resistenciaCC: 0,
        resistenciaAD: 0,
        rango: 3,
        vida: 5,
        agilidad: 20,
      },
      hulk: {
        name: 'Hulk',
        movimiento: 9,
        ataque: 11,
        defensa: 17,
        danoCC: 5,
        danoAD: 5,
        resistenciaCC: 2,
        resistenciaAD: 2,
        rango: 0,
        vida: 10,
        agilidad: 10,
      },
      capitan: {
        name: 'Capitán América',
        movimiento: 8,
        ataque: 10,
        defensa: 17,
        danoCC: 2,
        danoAD: 2,
        resistenciaCC: 0,
        resistenciaAD: 2,
        rango: 3,
        vida: 8,
        agilidad: 40,
      },
      negra1: {
        name: 'Spider-man',
        movimiento: 10,
        ataque: 12,
        defensa: 18,
        danoCC: 2,
        danoAD: 2,
        resistenciaCC: 0,
        resistenciaAD: 0,
        rango: 2,
        vida: 9,
        agilidad: 50,
      },
      negra2: {
        name: 'Lobezno',
        movimiento: 8,
        ataque: 10,
        defensa: 16,
        danoCC: 2,
        danoAD: 2,
        resistenciaCC: 1,
        resistenciaAD: 1,
        rango: 0,
        vida: 8,
        agilidad: 30,
      },
      negra3: {
        name: 'Cíclope',
        movimiento: 6,
        ataque: 11,
        defensa: 15,
        danoCC: 2,
        danoAD: 4,
        resistenciaCC: 0,
        resistenciaAD: 0,
        rango: 10,
        vida: 5,
        agilidad: 20,
      },
    };

    squares.forEach((square, index) => {
      const row = Math.floor(index / 8) + 1;
      const col = (index % 8) + 1;
      square.dataset.row = row;
      square.dataset.col = col;
    });

    const pieceMap = new Map();

    function attachPieceData(piece, key, team) {
      const stats = pieceStats[key];
      piece.dataset.key = key;
      piece.dataset.team = team;
      piece.dataset.rango = stats.rango;
      piece.dataset.movimiento = stats.movimiento;
      piece.dataset.stats = JSON.stringify(stats);
      pieceMap.set(piece, stats);
    }

    const pieces = [
      { element: document.querySelector('.piece--white'), key: 'avispa', team: 'aliado' },
      { element: document.querySelector('.piece--red'), key: 'hulk', team: 'aliado' },
      { element: document.querySelector('.piece--violet'), key: 'capitan', team: 'aliado' },
      ...Array.from(board.querySelectorAll('.piece--black')).map((element, index) => ({
        element,
        key: `negra${index + 1}`,
        team: 'enemigo',
      })),
    ];

    pieces.forEach(({ element, key, team }) => {
      if (element) {
        attachPieceData(element, key, team);
      }
    });

    const turnOrder = pieces
      .map(({ element }) => element)
      .filter(Boolean)
      .sort((a, b) => {
        const statsA = pieceMap.get(a);
        const statsB = pieceMap.get(b);
        if (statsA.agilidad === statsB.agilidad) {
          return Math.random() < 0.5 ? -1 : 1;
        }
        return statsB.agilidad - statsA.agilidad;
      });

    let turnIndex = 0;
    let attackMode = false;

    function getPieceSquare(piece) {
      return piece.closest('.square');
    }

    function clearHighlights() {
      squares.forEach((square) => square.classList.remove('square--range', 'square--move'));
      tooltip.hidden = true;
    }

    function highlightMovement(piece) {
      const parent = getPieceSquare(piece);
      if (!parent) return;
      const row = Number(parent.dataset.row);
      const col = Number(parent.dataset.col);
      const maxMove = Number(piece.dataset.movimiento);
      squares.forEach((square) => {
        const targetRow = Number(square.dataset.row);
        const targetCol = Number(square.dataset.col);
        const manhattan = Math.abs(targetRow - row) + Math.abs(targetCol - col);
        if (manhattan > 0 && manhattan <= maxMove) {
          square.classList.add('square--move');
        }
      });
    }

    function setActivePiece(piece) {
      document.querySelectorAll('.piece').forEach((p) => p.classList.remove('piece--active'));
      piece.classList.add('piece--active');
      clearHighlights();
      highlightMovement(piece);
    }

    function rangeForPiece(piece) {
      const r = parseInt(piece.dataset.rango, 10);
      return r === 0 ? 1 : r;
    }

    function highlightRange(piece) {
      const parent = getPieceSquare(piece);
      if (!parent) return;
      const row = Number(parent.dataset.row);
      const col = Number(parent.dataset.col);
      const maxRange = rangeForPiece(piece);
      squares.forEach((square) => {
        const targetRow = Number(square.dataset.row);
        const targetCol = Number(square.dataset.col);
        const manhattan = Math.abs(targetRow - row) + Math.abs(targetCol - col);
        if (manhattan > 0 && manhattan <= maxRange) {
          square.classList.add('square--range');
        }
      });
    }

    function showTooltip(piece) {
      const stats = pieceMap.get(piece);
      if (!stats) return;
      tooltip.innerHTML = `
        <h3>${stats.name}</h3>
        <ul>
          <li>Mov: ${stats.movimiento}</li>
          <li>Atk: ${stats.ataque}</li>
          <li>Def: ${stats.defensa}</li>
          <li>C/C: ${stats.danoCC}</li>
          <li>A/D: ${stats.danoAD}</li>
          <li>Res C/C: ${stats.resistenciaCC}</li>
          <li>Res A/D: ${stats.resistenciaAD}</li>
          <li>Rango: ${stats.rango}</li>
          <li>Vida: ${stats.vida}</li>
          <li>Agilidad: ${stats.agilidad}</li>
        </ul>
      `;
      tooltip.hidden = false;
    }

    function positionTooltip(target) {
      const rect = target.getBoundingClientRect();
      tooltip.style.left = `${rect.left + rect.width / 2}px`;
      tooltip.style.top = `${rect.top - 12}px`;
    }

    function hideTooltip() {
      tooltip.hidden = true;
    }

    function nextTurn() {
      clearHighlights();
      attackMode = false;
      turnIndex = (turnIndex + 1) % turnOrder.length;
      setActivePiece(turnOrder[turnIndex]);
    }

    passButton.addEventListener('click', () => {
      nextTurn();
    });

    attackButton.addEventListener('click', () => {
      const currentPiece = turnOrder[turnIndex];
      attackMode = true;
      clearHighlights();
      highlightRange(currentPiece);
    });

    board.addEventListener('mouseenter', (event) => {
      const targetPiece = event.target.closest('.piece');
      if (!attackMode || !targetPiece) return;
      const attacker = turnOrder[turnIndex];
      if (targetPiece.dataset.team === attacker.dataset.team) return;
      const square = getPieceSquare(targetPiece);
      if (!square.classList.contains('square--range')) return;
      showTooltip(targetPiece);
      positionTooltip(targetPiece);
    }, true);

    board.addEventListener('mousemove', (event) => {
      if (tooltip.hidden) return;
      positionTooltip(event.target.closest('.piece') || event.target);
    });

    board.addEventListener('mouseleave', () => {
      hideTooltip();
    });

    board.addEventListener('click', (event) => {
      const square = event.target.closest('.square');
      if (!square) return;

      const activePiece = turnOrder[turnIndex];

      if (attackMode) {
        const targetPiece = event.target.closest('.piece');
        if (!targetPiece) return;
        if (targetPiece.dataset.team === activePiece.dataset.team) return;
        if (!square.classList.contains('square--range')) return;
        const confirmAttack = window.confirm(`¿${activePiece.textContent} ataca a ${targetPiece.textContent}?`);
        if (confirmAttack) {
          hideTooltip();
          alert(`${activePiece.textContent} atacó a ${targetPiece.textContent}.`);
          nextTurn();
        }
      } else {
        if (!square.classList.contains('square--move')) return;
        if (square.querySelector('.piece')) return;
        square.appendChild(activePiece);
        clearHighlights();
        highlightMovement(activePiece);
      }
    });

    setActivePiece(turnOrder[turnIndex]);
  </script>
</body>
</html>
